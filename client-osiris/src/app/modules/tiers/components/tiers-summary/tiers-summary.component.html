<article class="card card-out-of-container border-top-0">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
      @if(tiers){
      <div class="justify-content-start align-items-center gap-3">
        <div class="row">
          <h4 class="col text-nowrap fw-bold mb-1"> {{tiers.denomination}} </h4>
          <p class="col text-muted mb-1">{{tiers.lastname}}</p>
          @if (tiers.firstname){<p class="col text-muted mb-1">
            {{tiers.firstname.charAt(0).toUpperCase()}}</p>}
        </div>
      </div>
      <div class="d-flex gap-2">
        @if(tiers.phones){
        @if(tiers.phones.length==1){
        <div>
          <button class="btn btn-outline-primary" (click)="call(tiers.phones[0])">Appeler<ng-icon name="tablerPhone"
              class="align-top ms-1"></ng-icon></button>
        </div>
        }
        @else {
        <div ngbDropdown>
          <button ngbDropdownToggle class="btn btn-outline-primary" type="button">Appeler<ng-icon name="tablerPhone"
              class="align-top ms-1"></ng-icon></button>
          <div ngbDropdownMenu>
            @for(phone of tiers.phones; track $index){
            <a ngbDropdownItem style="cursor: pointer;" (click)="call(phone)">{{phone.phoneNumber}}<ng-icon
                name="tablerBrandTeams" class="align-top ms-3 fs-16"></ng-icon></a>
            }
          </div>
        </div>
        }
        }

        @if(tiers.mails && tiers.mails.length){
        @if(tiers.mails.length==1){
        <div>
          <button class="btn btn-outline-primary" (click)="sendMail(tiers.mails[0])">Envoyer un mail<ng-icon
              name="tablerMail" class="align-top ms-1"></ng-icon></button>
        </div>
        }
        @else {
        <div ngbDropdown>
          <button ngbDropdownToggle class="btn btn-outline-primary" type="button">Envoyer un mail<ng-icon
              name="tablerMail" class="align-top ms-1"></ng-icon></button>
          <div ngbDropdownMenu>
            @for(mail of tiers.mails; track mail.id){
            <a ngbDropdownItem style="cursor: pointer;" (click)="sendMail(mail)">{{mail.mail}}</a>
            }
          </div>
        </div>
        }
        }

        <div ngbDropdown>
          <button ngbDropdownToggle class="btn btn-icon btn-dark drop-arrow-none" data-bs-toggle="dropdown">
            <ng-icon name="tablerDots" class="fs-24"></ng-icon>
          </button>
          <ul ngbDropdownMenu>
            <li><a ngbDropdownItem class="text-danger" style="cursor: pointer;"
                (click)="deleteTiers(tiers)">Supprimer</a>
            </li>
          </ul>
        </div>

      </div>
      }
    </div>
  </div>
</article>