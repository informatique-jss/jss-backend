<fieldset [disabled]="editMode==false" class="fieldset-no-border">
  <table class="full-width">
    <tr>
      <td>
        <generic-toggle [(model)]="affaire.isIndividual" label="Particulier ?" [form]="affaireForm"
          propertyName="isIndividual"></generic-toggle>
      </td>
      <td *ngIf="affaire.isIndividual==true">
        <radio-group-civility [(model)]="affaire.civility" [form]="affaireForm" propertyName="civility"
          [isDisabled]="!editMode" label="Civilité"></radio-group-civility>
      </td>
      <td *ngIf="affaire.isIndividual==true">
        <generic-input [(model)]="affaire.lastname" label="Nom" [form]="affaireForm" propertyName="lastname"
          [isMandatory]="true" [conditionnalRequired]="affaire.isIndividual" [maxLength]="20"></generic-input>
      </td>
      <td *ngIf="affaire.isIndividual==true">
        <generic-input [(model)]="affaire.firstname" label="Prénom" [form]="affaireForm" propertyName="firstname"
          [isMandatory]="true" [conditionnalRequired]="affaire.isIndividual" [maxLength]="20"></generic-input>
      </td>
    </tr>
  </table>
  <table class="full-width" *ngIf="affaire.isIndividual==false">
    <tr>
      <td>
        <autocomplete-legal-form [(model)]="affaire.legalForm" [form]="affaireForm" propertyName="legalForm"
          label="Forme juridique" [isDisabled]="!editMode" [isMandatory]="true" [isDisabled]="!editMode"
          [conditionnalRequired]="!affaire.isIndividual">
        </autocomplete-legal-form>
      </td>
      <td *ngIf="affaire.legalForm != null && affaire.legalForm.id != legalFormUnregistered.id">
        <autocomplete-siren [(model)]="affaire.siren" [form]="affaireForm" propertyName="siren" [isMandatory]="true"
          label="SIREN" [isDisabled]="!editMode" [byPassAutocompletValidator]="true"
          [conditionnalRequired]="!this.affaire.isIndividual && this.affaire.legalForm != null && (!this.affaire.siret || !this.affaire.rna)"
          [customValidators]="[checkSiren('siren')]" (onOptionSelected)="fillSiren($event)">
        </autocomplete-siren>
      </td>
      <td *ngIf="affaire.legalForm != null && affaire.legalForm.id != legalFormUnregistered.id">
        <autocomplete-siret [(model)]="affaire.siret" [form]="affaireForm" propertyName="siret" [isMandatory]="true"
          label="SIRET" [isDisabled]="!editMode" [byPassAutocompletValidator]="true"
          [conditionnalRequired]="!this.affaire.isIndividual && this.affaire.legalForm != null && (!this.affaire.siren || !this.affaire.rna)"
          [customValidators]="[checkSiret('siret')]" (onOptionSelected)="fillSiret($event)">
        </autocomplete-siret>
      </td>
      <td *ngIf="affaire.legalForm != null && affaire.legalForm.id != legalFormUnregistered.id">
        <autocomplete-rna [(model)]="affaire.rna" [form]="affaireForm" propertyName="rna" [isMandatory]="true"
          label="RNA" [isDisabled]="!editMode" [byPassAutocompletValidator]="true"
          [conditionnalRequired]="!this.affaire.isIndividual && this.affaire.legalForm != null && (!this.affaire.siren ||!this.affaire.siret)"
          [customValidators]="[checkRna('rna')]" (onOptionSelected)="fillRna($event)"></autocomplete-rna>
      </td>
    </tr>
  </table>
  <table class="full-width">
    <tr>
      <td>
        <generic-input [(model)]="affaire.denomination" label="Dénomination" [form]="affaireForm"
          propertyName="denomination" [isMandatory]="true" [isDisabled]="!editMode"
          [conditionnalRequired]="!this.affaire.isIndividual" [maxLength]="60"></generic-input>
      </td>
    </tr>
  </table>
  <table class="full-width">
    <tr>
      <td>
        <generic-input [(model)]="affaire.address" label="Adresse" [form]="affaireForm" propertyName="address"
          [isMandatory]="true" [isDisabled]="!editMode" [conditionnalRequired]="!this.affaire.isIndividual"
          [maxLength]="60"></generic-input>
      </td>
      <td>
        <autocomplete-postal-code [(model)]="affaire.postalCode" [form]="affaireForm" propertyName="postalCode"
          label="Code postal" [isDisabled]="!editMode" [isMandatory]="true" [byPassAutocompletValidator]="true"
          [conditionnalRequired]="!affaire.isIndividual" (onOptionSelected)="fillCity($event)">
        </autocomplete-postal-code>
      </td>
      <td>
        <autocomplete-city [(model)]="affaire.city" [modelCountry]="affaire.country" [form]="affaireForm"
          propertyName="city" [isMandatory]="true" [conditionnalRequired]="!affaire.isIndividual"
          [isDisabled]="!editMode" label="Ville" (onOptionSelected)="fillPostalCode($event)"></autocomplete-city>
      </td>
      <td>
        <autocomplete-country [(model)]="affaire.country" [form]="affaireForm" propertyName="country" label="Pays"
          [isDisabled]="!editMode" [isMandatory]="true" [isDisabled]="!editMode"></autocomplete-country>
      </td>
    </tr>
  </table>
  <table class="full-width">
    <tr>
      <td>
        <chips-mail [(model)]="affaire.mails" label="Mails de facturation" [form]="affaireForm" propertyName="mails"
          [isDisabled]="!editMode"></chips-mail>
      </td>
      <td>
        <chips-phone [(model)]="affaire.phones" label="Téléphones" [form]="affaireForm" propertyName="phones"
          [isDisabled]="!editMode"></chips-phone>
      </td>
      <td>
        <generic-input [(model)]="affaire.externalReference" label="Référence externe" [form]="affaireForm"
          propertyName="externalReference" [isDisabled]="!editMode" [maxLength]="60"></generic-input>
      </td>
      <td>
        <generic-input [(model)]="affaire.shareCapital" label="Capital social" [form]="affaireForm"
          propertyName="shareCapital" [isDisabled]="!editMode" type="number"></generic-input>
      </td>
    </tr>
  </table>
  <table class="full-width">
    <tr>
      <td>
        <generic-input [(model)]="affaire.paymentIban" label="IBAN" [form]="affaireForm" propertyName="paymentIban"
          [isMandatory]="false" [isDisabled]="!editMode" [maxLength]="40"></generic-input>
      </td>
    </tr>
  </table>
  <table class="full-width">
    <tr>
      <td>
        <generic-textarea [(model)]="affaire.observations" label="Observations" [form]="affaireForm"
          propertyName="observations" [isDisabled]="!editMode" [numberOfLines]="4"></generic-textarea>
      </td>
    </tr>
  </table>
</fieldset>
