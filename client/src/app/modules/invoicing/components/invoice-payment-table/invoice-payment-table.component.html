<table class="mat-table middle-width">
  <tr class=" mat-header-row"
    *ngIf="invoice.payments && invoice.payments.length>0 || invoice.deposits && invoice.deposits.length>0">
    <th class="mat-header-cell" colspan="2">Paiements associés</th>
  </tr>
  <ng-container *ngIf="invoice.payments && invoice.payments.length>0 ">
    <tr class="mat-row" *ngFor="let payment of invoice.payments">
      <td class="mat-cell">
        N°{{payment.id}} du {{formatDate(payment.paymentDate)}} - {{payment.label}}
      </td>
      <td class="td-price mat-cell">
        {{payment.paymentAmount}} €
      </td>
    </tr>
  </ng-container>
  <ng-container *ngIf="invoice.deposits && invoice.deposits.length>0 ">
    <tr class="mat-row" *ngFor="let deposit of invoice.deposits">
      <td class="mat-cell payment-label" [matTooltip]="deposit.originPayment.label">
        N°{{deposit.id}} du {{formatDate(deposit.depositDate)}} - {{deposit.label}} - montant du paiement :
        {{deposit.originPayment.paymentAmount}} € - {{deposit.originPayment.label}}
      </td>
      <td class="td-price mat-cell">
        {{deposit.depositAmount}} €
      </td>
    </tr>
  </ng-container>
  <ng-container *ngIf="invoice.appoints && invoice.appoints.length>0 ">
    <tr class="mat-row" *ngFor="let appoint of invoice.appoints">
      <td class="mat-cell payment-label" [matTooltip]="appoint.originPayment.label">
        Dont appoint n°{{appoint.id}} du {{formatDate(appoint.appointDate)}} - {{appoint.label}}
      </td>
      <td class="td-price mat-cell">
        {{appoint.appointAmount | number}} €
      </td>
    </tr>
  </ng-container>
  <tr class="mat-row"
    *ngIf="invoice.payments && invoice.payments.length>0 || invoice.deposits && invoice.deposits.length>0">
    <td class="mat-cell">
    </td>
    <td class="td-price mat-cell">
    </td>
  </tr>
  <tr class="mat-row" *ngIf="!invoice.isCreditNote">
    <td class="mat-cell">Reste à payer
    </td>
    <td class="td-price mat-cell">{{getAmountRemaining(invoice)}} €
    </td>
  </tr>
  <tr class="mat-row" *ngIf="invoice.isCreditNote">
    <td class="mat-cell">Net à créditer
    </td>
    <td class="td-price mat-cell">{{getAmountPayed(invoice)}} €
    </td>
  </tr>
  <tr
    *ngIf="invoice && invoice.customerOrder && invoice.customerOrder.centralPayPendingPaymentAmount  && invoice.customerOrder.centralPayPendingPaymentAmount >0">
    <td class="mat-cell">Paiement reçu par CB en attente de réception</td>
    <td class="td-price mat-cell">{{invoice.customerOrder.centralPayPendingPaymentAmount | number}} €</td>
  </tr>
</table>